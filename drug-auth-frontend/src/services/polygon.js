import { ethers } from "ethers";

// Polygon contract setup
const CONTRACT_ADDRESS = "0xc82a1746f615b980b8308bdc48194add9164dac0";
const ABI = [
    {"abi":[{"type":"constructor","inputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"addDrug","inputs":[{"name":"_name","type":"string","internalType":"string"},{"name":"_batchId","type":"string","internalType":"string"},{"name":"_manufactureDate","type":"uint256","internalType":"uint256"},{"name":"_expiryDate","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"drugs","inputs":[{"name":"","type":"string","internalType":"string"}],"outputs":[{"name":"name","type":"string","internalType":"string"},{"name":"batchId","type":"string","internalType":"string"},{"name":"manufactureDate","type":"uint256","internalType":"uint256"},{"name":"expiryDate","type":"uint256","internalType":"uint256"},{"name":"isAuthentic","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"invalidateDrug","inputs":[{"name":"_batchId","type":"string","internalType":"string"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"name","inputs":[],"outputs":[{"name":"","type":"string","internalType":"string"}],"stateMutability":"pure"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"verifyDrug","inputs":[{"name":"_batchId","type":"string","internalType":"string"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"}],"bytecode":{"object":"0x6080604052348015600e575f5ffd5b50335f5f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550610cd08061005b5f395ff3fe608060405234801561000f575f5ffd5b5060043610610060575f3560e01c806306fdde03146100645780633b7b0a74146100825780638da5cb5b146100b2578063b009493d146100d0578063b79befff14610104578063fc0e4e2f14610120575b5f5ffd5b61006c61013c565b60405161007991906105aa565b60405180910390f35b61009c60048036038101906100979190610707565b610179565b6040516100a99190610768565b60405180910390f35b6100ba6101af565b6040516100c791906107c0565b60405180910390f35b6100ea60048036038101906100e59190610707565b6101d3565b6040516100fb9594939291906107f1565b60405180910390f35b61011e6004803603810190610119919061087a565b610335565b005b61013a60048036038101906101359190610707565b610471565b005b60606040518060400160405280601381526020017f447275672041757468656e7469636174696f6e00000000000000000000000000815250905090565b5f60018260405161018a9190610950565b90815260200160405180910390206004015f9054906101000a900460ff169050919050565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6001818051602081018201805184825260208301602085012081835280955050505050505f91509050805f01805461020a90610993565b80601f016020809104026020016040519081016040528092919081815260200182805461023690610993565b80156102815780601f1061025857610100808354040283529160200191610281565b820191905f5260205f20905b81548152906001019060200180831161026457829003601f168201915b50505050509080600101805461029690610993565b80601f01602080910402602001604051908101604052809291908181526020018280546102c290610993565b801561030d5780601f106102e45761010080835404028352916020019161030d565b820191905f5260205f20905b8154815290600101906020018083116102f057829003601f168201915b505050505090806002015490806003015490806004015f9054906101000a900460ff16905085565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146103c3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103ba90610a0d565b60405180910390fd5b6040518060a00160405280858152602001848152602001838152602001828152602001600115158152506001846040516103fd9190610950565b90815260200160405180910390205f820151815f01908161041e9190610bcb565b5060208201518160010190816104349190610bcb565b5060408201518160020155606082015181600301556080820151816004015f6101000a81548160ff02191690831515021790555090505050505050565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146104ff576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104f690610a0d565b60405180910390fd5b5f6001826040516105109190610950565b90815260200160405180910390206004015f6101000a81548160ff02191690831515021790555050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f61057c8261053a565b6105868185610544565b9350610596818560208601610554565b61059f81610562565b840191505092915050565b5f6020820190508181035f8301526105c28184610572565b905092915050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61061982610562565b810181811067ffffffffffffffff82111715610638576106376105e3565b5b80604052505050565b5f61064a6105ca565b90506106568282610610565b919050565b5f67ffffffffffffffff821115610675576106746105e3565b5b61067e82610562565b9050602081019050919050565b828183375f83830152505050565b5f6106ab6106a68461065b565b610641565b9050828152602081018484840111156106c7576106c66105df565b5b6106d284828561068b565b509392505050565b5f82601f8301126106ee576106ed6105db565b5b81356106fe848260208601610699565b91505092915050565b5f6020828403121561071c5761071b6105d3565b5b5f82013567ffffffffffffffff811115610739576107386105d7565b5b610745848285016106da565b91505092915050565b5f8115159050919050565b6107628161074e565b82525050565b5f60208201905061077b5f830184610759565b92915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6107aa82610781565b9050919050565b6107ba816107a0565b82525050565b5f6020820190506107d35f8301846107b1565b92915050565b5f819050919050565b6107eb816107d9565b82525050565b5f60a0820190508181035f8301526108098188610572565b9050818103602083015261081d8187610572565b905061082c60408301866107e2565b61083960608301856107e2565b6108466080830184610759565b9695505050505050565b610859816107d9565b8114610863575f5ffd5b50565b5f8135905061087481610850565b92915050565b5f5f5f5f60808587031215610892576108916105d3565b5b5f85013567ffffffffffffffff8111156108af576108ae6105d7565b5b6108bb878288016106da565b945050602085013567ffffffffffffffff8111156108dc576108db6105d7565b5b6108e8878288016106da565b93505060406108f987828801610866565b925050606061090a87828801610866565b91505092959194509250565b5f81905092915050565b5f61092a8261053a565b6109348185610916565b9350610944818560208601610554565b80840191505092915050565b5f61095b8284610920565b915081905092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f60028204905060018216806109aa57607f821691505b6020821081036109bd576109bc610966565b5b50919050565b7f4e6f7420617574686f72697a65640000000000000000000000000000000000005f82015250565b5f6109f7600e83610544565b9150610a02826109c3565b602082019050919050565b5f6020820190508181035f830152610a24816109eb565b9050919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f60088302610a877fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610a4c565b610a918683610a4c565b95508019841693508086168417925050509392505050565b5f819050919050565b5f610acc610ac7610ac2846107d9565b610aa9565b6107d9565b9050919050565b5f819050919050565b610ae583610ab2565b610af9610af182610ad3565b848454610a58565b825550505050565b5f5f905090565b610b10610b01565b610b1b818484610adc565b505050565b5b81811015610b3e57610b335f82610b08565b600181019050610b21565b5050565b601f821115610b8357610b5481610a2b565b610b5d84610a3d565b81016020851015610b6c578190505b610b80610b7885610a3d565b830182610b20565b50505b505050565b5f82821c905092915050565b5f610ba35f1984600802610b88565b1980831691505092915050565b5f610bbb8383610b94565b9150826002028217905092915050565b610bd48261053a565b67ffffffffffffffff811115610bed57610bec6105e3565b5b610bf78254610993565b610c02828285610b42565b5f60209050601f831160018114610c33575f8415610c21578287015190505b610c2b8582610bb0565b865550610c92565b601f198416610c4186610a2b565b5f5b82811015610c6857848901518255600182019150602085019450602081019050610c43565b86831015610c855784890151610c81601f891682610b94565b8355505b6001600288020188555050505b50505050505056fea26469706673582212201415a834b26a39275a25d40a99360fc45ebef4f78dd2ca431cf1334840aaaa6464736f6c634300081d0033","sourceMap":"58:1012:16:-:0;;;410:49;;;;;;;;;;442:10;434:5;;:18;;;;;;;;;;;;;;;;;;58:1012;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405234801561000f575f5ffd5b5060043610610060575f3560e01c806306fdde03146100645780633b7b0a74146100825780638da5cb5b146100b2578063b009493d146100d0578063b79befff14610104578063fc0e4e2f14610120575b5f5ffd5b61006c61013c565b60405161007991906105aa565b60405180910390f35b61009c60048036038101906100979190610707565b610179565b6040516100a99190610768565b60405180910390f35b6100ba6101af565b6040516100c791906107c0565b60405180910390f35b6100ea60048036038101906100e59190610707565b6101d3565b6040516100fb9594939291906107f1565b60405180910390f35b61011e6004803603810190610119919061087a565b610335565b005b61013a60048036038101906101359190610707565b610471565b005b60606040518060400160405280601381526020017f447275672041757468656e7469636174696f6e00000000000000000000000000815250905090565b5f60018260405161018a9190610950565b90815260200160405180910390206004015f9054906101000a900460ff169050919050565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6001818051602081018201805184825260208301602085012081835280955050505050505f91509050805f01805461020a90610993565b80601f016020809104026020016040519081016040528092919081815260200182805461023690610993565b80156102815780601f1061025857610100808354040283529160200191610281565b820191905f5260205f20905b81548152906001019060200180831161026457829003601f168201915b50505050509080600101805461029690610993565b80601f01602080910402602001604051908101604052809291908181526020018280546102c290610993565b801561030d5780601f106102e45761010080835404028352916020019161030d565b820191905f5260205f20905b8154815290600101906020018083116102f057829003601f168201915b505050505090806002015490806003015490806004015f9054906101000a900460ff16905085565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146103c3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103ba90610a0d565b60405180910390fd5b6040518060a00160405280858152602001848152602001838152602001828152602001600115158152506001846040516103fd9190610950565b90815260200160405180910390205f820151815f01908161041e9190610bcb565b5060208201518160010190816104349190610bcb565b5060408201518160020155606082015181600301556080820151816004015f6101000a81548160ff02191690831515021790555090505050505050565b5f5f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16146104ff576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016104f690610a0d565b60405180910390fd5b5f6001826040516105109190610950565b90815260200160405180910390206004015f6101000a81548160ff02191690831515021790555050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f61057c8261053a565b6105868185610544565b9350610596818560208601610554565b61059f81610562565b840191505092915050565b5f6020820190508181035f8301526105c28184610572565b905092915050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61061982610562565b810181811067ffffffffffffffff82111715610638576106376105e3565b5b80604052505050565b5f61064a6105ca565b90506106568282610610565b919050565b5f67ffffffffffffffff821115610675576106746105e3565b5b61067e82610562565b9050602081019050919050565b828183375f83830152505050565b5f6106ab6106a68461065b565b610641565b9050828152602081018484840111156106c7576106c66105df565b5b6106d284828561068b565b509392505050565b5f82601f8301126106ee576106ed6105db565b5b81356106fe848260208601610699565b91505092915050565b5f6020828403121561071c5761071b6105d3565b5b5f82013567ffffffffffffffff811115610739576107386105d7565b5b610745848285016106da565b91505092915050565b5f8115159050919050565b6107628161074e565b82525050565b5f60208201905061077b5f830184610759565b92915050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6107aa82610781565b9050919050565b6107ba816107a0565b82525050565b5f6020820190506107d35f8301846107b1565b92915050565b5f819050919050565b6107eb816107d9565b82525050565b5f60a0820190508181035f8301526108098188610572565b9050818103602083015261081d8187610572565b905061082c60408301866107e2565b61083960608301856107e2565b6108466080830184610759565b9695505050505050565b610859816107d9565b8114610863575f5ffd5b50565b5f8135905061087481610850565b92915050565b5f5f5f5f60808587031215610892576108916105d3565b5b5f85013567ffffffffffffffff8111156108af576108ae6105d7565b5b6108bb878288016106da565b945050602085013567ffffffffffffffff8111156108dc576108db6105d7565b5b6108e8878288016106da565b93505060406108f987828801610866565b925050606061090a87828801610866565b91505092959194509250565b5f81905092915050565b5f61092a8261053a565b6109348185610916565b9350610944818560208601610554565b80840191505092915050565b5f61095b8284610920565b915081905092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f60028204905060018216806109aa57607f821691505b6020821081036109bd576109bc610966565b5b50919050565b7f4e6f7420617574686f72697a65640000000000000000000000000000000000005f82015250565b5f6109f7600e83610544565b9150610a02826109c3565b602082019050919050565b5f6020820190508181035f830152610a24816109eb565b9050919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f60088302610a877fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610a4c565b610a918683610a4c565b95508019841693508086168417925050509392505050565b5f819050919050565b5f610acc610ac7610ac2846107d9565b610aa9565b6107d9565b9050919050565b5f819050919050565b610ae583610ab2565b610af9610af182610ad3565b848454610a58565b825550505050565b5f5f905090565b610b10610b01565b610b1b818484610adc565b505050565b5b81811015610b3e57610b335f82610b08565b600181019050610b21565b5050565b601f821115610b8357610b5481610a2b565b610b5d84610a3d565b81016020851015610b6c578190505b610b80610b7885610a3d565b830182610b20565b50505b505050565b5f82821c905092915050565b5f610ba35f1984600802610b88565b1980831691505092915050565b5f610bbb8383610b94565b9150826002028217905092915050565b610bd48261053a565b67ffffffffffffffff811115610bed57610bec6105e3565b5b610bf78254610993565b610c02828285610b42565b5f60209050601f831160018114610c33575f8415610c21578287015190505b610c2b8582610bb0565b865550610c92565b601f198416610c4186610a2b565b5f5b82811015610c6857848901518255600182019150602085019450602081019050610c43565b86831015610c855784890151610c81601f891682610b94565b8355505b6001600288020188555050505b50505050505056fea26469706673582212201415a834b26a39275a25d40a99360fc45ebef4f78dd2ca431cf1334840aaaa6464736f6c634300081d0033","sourceMap":"58:1012:16:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;978:89;;;:::i;:::-;;;;;;;:::i;:::-;;;;;;;;728:122;;;;;;;;;;;;;:::i;:::-;;:::i;:::-;;;;;;;:::i;:::-;;;;;;;;82:20;;;:::i;:::-;;;;;;;:::i;:::-;;;;;;;;266:36;;;;;;;;;;;;;:::i;:::-;;:::i;:::-;;;;;;;;;;;:::i;:::-;;;;;;;;465:257;;;;;;;;;;;;;:::i;:::-;;:::i;:::-;;856:117;;;;;;;;;;;;;:::i;:::-;;:::i;:::-;;978:89;1015:13;1036:28;;;;;;;;;;;;;;;;;;;978:89;:::o;728:122::-;793:4;816:5;822:8;816:15;;;;;;:::i;:::-;;;;;;;;;;;;;:27;;;;;;;;;;;;809:34;;728:122;;;:::o;82:20::-;;;;;;;;;;;;;:::o;266:36::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;465:257::-;362:5;;;;;;;;;;;348:19;;:10;:19;;;340:46;;;;;;;;;;;;:::i;:::-;;;;;;;;;657:58:::1;;;;;;;;662:5;657:58;;;;669:8;657:58;;;;679:16;657:58;;;;697:11;657:58;;;;710:4;657:58;;;;::::0;639:5:::1;645:8;639:15;;;;;;:::i;:::-;;;;;;;;;;;;;:76;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;465:257:::0;;;;:::o;856:117::-;362:5;;;;;;;;;;;348:19;;:10;:19;;;340:46;;;;;;;;;;;;:::i;:::-;;;;;;;;;961:5:::1;931;937:8;931:15;;;;;;:::i;:::-;;;;;;;;;;;;;:27;;;:35;;;;;;;;;;;;;;;;;;856:117:::0;:::o;7:99:17:-;59:6;93:5;87:12;77:22;;7:99;;;:::o;112:169::-;196:11;230:6;225:3;218:19;270:4;265:3;261:14;246:29;;112:169;;;;:::o;287:139::-;376:6;371:3;366;360:23;417:1;408:6;403:3;399:16;392:27;287:139;;;:::o;432:102::-;473:6;524:2;520:7;515:2;508:5;504:14;500:28;490:38;;432:102;;;:::o;540:377::-;628:3;656:39;689:5;656:39;:::i;:::-;711:71;775:6;770:3;711:71;:::i;:::-;704:78;;791:65;849:6;844:3;837:4;830:5;826:16;791:65;:::i;:::-;881:29;903:6;881:29;:::i;:::-;876:3;872:39;865:46;;632:285;540:377;;;;:::o;923:313::-;1036:4;1074:2;1063:9;1059:18;1051:26;;1123:9;1117:4;1113:20;1109:1;1098:9;1094:17;1087:47;1151:78;1224:4;1215:6;1151:78;:::i;:::-;1143:86;;923:313;;;;:::o;1242:75::-;1275:6;1308:2;1302:9;1292:19;;1242:75;:::o;1323:117::-;1432:1;1429;1422:12;1446:117;1555:1;1552;1545:12;1569:117;1678:1;1675;1668:12;1692:117;1801:1;1798;1791:12;1815:180;1863:77;1860:1;1853:88;1960:4;1957:1;1950:15;1984:4;1981:1;1974:15;2001:281;2084:27;2106:4;2084:27;:::i;:::-;2076:6;2072:40;2214:6;2202:10;2199:22;2178:18;2166:10;2163:34;2160:62;2157:88;;;2225:18;;:::i;:::-;2157:88;2265:10;2261:2;2254:22;2044:238;2001:281;;:::o;2288:129::-;2322:6;2349:20;;:::i;:::-;2339:30;;2378:33;2406:4;2398:6;2378:33;:::i;:::-;2288:129;;;:::o;2423:308::-;2485:4;2575:18;2567:6;2564:30;2561:56;;;2597:18;;:::i;:::-;2561:56;2635:29;2657:6;2635:29;:::i;:::-;2627:37;;2719:4;2713;2709:15;2701:23;;2423:308;;;:::o;2737:148::-;2835:6;2830:3;2825;2812:30;2876:1;2867:6;2862:3;2858:16;2851:27;2737:148;;;:::o;2891:425::-;2969:5;2994:66;3010:49;3052:6;3010:49;:::i;:::-;2994:66;:::i;:::-;2985:75;;3083:6;3076:5;3069:21;3121:4;3114:5;3110:16;3159:3;3150:6;3145:3;3141:16;3138:25;3135:112;;;3166:79;;:::i;:::-;3135:112;3256:54;3303:6;3298:3;3293;3256:54;:::i;:::-;2975:341;2891:425;;;;;:::o;3336:340::-;3392:5;3441:3;3434:4;3426:6;3422:17;3418:27;3408:122;;3449:79;;:::i;:::-;3408:122;3566:6;3553:20;3591:79;3666:3;3658:6;3651:4;3643:6;3639:17;3591:79;:::i;:::-;3582:88;;3398:278;3336:340;;;;:::o;3682:509::-;3751:6;3800:2;3788:9;3779:7;3775:23;3771:32;3768:119;;;3806:79;;:::i;:::-;3768:119;3954:1;3943:9;3939:17;3926:31;3984:18;3976:6;3973:30;3970:117;;;4006:79;;:::i;:::-;3970:117;4111:63;4166:7;4157:6;4146:9;4142:22;4111:63;:::i;:::-;4101:73;;3897:287;3682:509;;;;:::o;4197:90::-;4231:7;4274:5;4267:13;4260:21;4249:32;;4197:90;;;:::o;4293:109::-;4374:21;4389:5;4374:21;:::i;:::-;4369:3;4362:34;4293:109;;:::o;4408:210::-;4495:4;4533:2;4522:9;4518:18;4510:26;;4546:65;4608:1;4597:9;4593:17;4584:6;4546:65;:::i;:::-;4408:210;;;;:::o;4624:126::-;4661:7;4701:42;4694:5;4690:54;4679:65;;4624:126;;;:::o;4756:96::-;4793:7;4822:24;4840:5;4822:24;:::i;:::-;4811:35;;4756:96;;;:::o;4858:118::-;4945:24;4963:5;4945:24;:::i;:::-;4940:3;4933:37;4858:118;;:::o;4982:222::-;5075:4;5113:2;5102:9;5098:18;5090:26;;5126:71;5194:1;5183:9;5179:17;5170:6;5126:71;:::i;:::-;4982:222;;;;:::o;5210:77::-;5247:7;5276:5;5265:16;;5210:77;;;:::o;5293:118::-;5380:24;5398:5;5380:24;:::i;:::-;5375:3;5368:37;5293:118;;:::o;5417:834::-;5656:4;5694:3;5683:9;5679:19;5671:27;;5744:9;5738:4;5734:20;5730:1;5719:9;5715:17;5708:47;5772:78;5845:4;5836:6;5772:78;:::i;:::-;5764:86;;5897:9;5891:4;5887:20;5882:2;5871:9;5867:18;5860:48;5925:78;5998:4;5989:6;5925:78;:::i;:::-;5917:86;;6013:72;6081:2;6070:9;6066:18;6057:6;6013:72;:::i;:::-;6095;6163:2;6152:9;6148:18;6139:6;6095:72;:::i;:::-;6177:67;6239:3;6228:9;6224:19;6215:6;6177:67;:::i;:::-;5417:834;;;;;;;;:::o;6257:122::-;6330:24;6348:5;6330:24;:::i;:::-;6323:5;6320:35;6310:63;;6369:1;6366;6359:12;6310:63;6257:122;:::o;6385:139::-;6431:5;6469:6;6456:20;6447:29;;6485:33;6512:5;6485:33;:::i;:::-;6385:139;;;;:::o;6530:1125::-;6636:6;6644;6652;6660;6709:3;6697:9;6688:7;6684:23;6680:33;6677:120;;;6716:79;;:::i;:::-;6677:120;6864:1;6853:9;6849:17;6836:31;6894:18;6886:6;6883:30;6880:117;;;6916:79;;:::i;:::-;6880:117;7021:63;7076:7;7067:6;7056:9;7052:22;7021:63;:::i;:::-;7011:73;;6807:287;7161:2;7150:9;7146:18;7133:32;7192:18;7184:6;7181:30;7178:117;;;7214:79;;:::i;:::-;7178:117;7319:63;7374:7;7365:6;7354:9;7350:22;7319:63;:::i;:::-;7309:73;;7104:288;7431:2;7457:53;7502:7;7493:6;7482:9;7478:22;7457:53;:::i;:::-;7447:63;;7402:118;7559:2;7585:53;7630:7;7621:6;7610:9;7606:22;7585:53;:::i;:::-;7575:63;;7530:118;6530:1125;;;;;;;:::o;7661:148::-;7763:11;7800:3;7785:18;;7661:148;;;;:::o;7815:390::-;7921:3;7949:39;7982:5;7949:39;:::i;:::-;8004:89;8086:6;8081:3;8004:89;:::i;:::-;7997:96;;8102:65;8160:6;8155:3;8148:4;8141:5;8137:16;8102:65;:::i;:::-;8192:6;8187:3;8183:16;8176:23;;7925:280;7815:390;;;;:::o;8211:275::-;8343:3;8365:95;8456:3;8447:6;8365:95;:::i;:::-;8358:102;;8477:3;8470:10;;8211:275;;;;:::o;8492:180::-;8540:77;8537:1;8530:88;8637:4;8634:1;8627:15;8661:4;8658:1;8651:15;8678:320;8722:6;8759:1;8753:4;8749:12;8739:22;;8806:1;8800:4;8796:12;8827:18;8817:81;;8883:4;8875:6;8871:17;8861:27;;8817:81;8945:2;8937:6;8934:14;8914:18;8911:38;8908:84;;8964:18;;:::i;:::-;8908:84;8729:269;8678:320;;;:::o;9004:164::-;9144:16;9140:1;9132:6;9128:14;9121:40;9004:164;:::o;9174:366::-;9316:3;9337:67;9401:2;9396:3;9337:67;:::i;:::-;9330:74;;9413:93;9502:3;9413:93;:::i;:::-;9531:2;9526:3;9522:12;9515:19;;9174:366;;;:::o;9546:419::-;9712:4;9750:2;9739:9;9735:18;9727:26;;9799:9;9793:4;9789:20;9785:1;9774:9;9770:17;9763:47;9827:131;9953:4;9827:131;:::i;:::-;9819:139;;9546:419;;;:::o;9971:141::-;10020:4;10043:3;10035:11;;10066:3;10063:1;10056:14;10100:4;10097:1;10087:18;10079:26;;9971:141;;;:::o;10118:93::-;10155:6;10202:2;10197;10190:5;10186:14;10182:23;10172:33;;10118:93;;;:::o;10217:107::-;10261:8;10311:5;10305:4;10301:16;10280:37;;10217:107;;;;:::o;10330:393::-;10399:6;10449:1;10437:10;10433:18;10472:97;10502:66;10491:9;10472:97;:::i;:::-;10590:39;10620:8;10609:9;10590:39;:::i;:::-;10578:51;;10662:4;10658:9;10651:5;10647:21;10638:30;;10711:4;10701:8;10697:19;10690:5;10687:30;10677:40;;10406:317;;10330:393;;;;;:::o;10729:60::-;10757:3;10778:5;10771:12;;10729:60;;;:::o;10795:142::-;10845:9;10878:53;10896:34;10905:24;10923:5;10905:24;:::i;:::-;10896:34;:::i;:::-;10878:53;:::i;:::-;10865:66;;10795:142;;;:::o;10943:75::-;10986:3;11007:5;11000:12;;10943:75;;;:::o;11024:269::-;11134:39;11165:7;11134:39;:::i;:::-;11195:91;11244:41;11268:16;11244:41;:::i;:::-;11236:6;11229:4;11223:11;11195:91;:::i;:::-;11189:4;11182:105;11100:193;11024:269;;;:::o;11299:73::-;11344:3;11365:1;11358:8;;11299:73;:::o;11378:189::-;11455:32;;:::i;:::-;11496:65;11554:6;11546;11540:4;11496:65;:::i;:::-;11431:136;11378:189;;:::o;11573:186::-;11633:120;11650:3;11643:5;11640:14;11633:120;;;11704:39;11741:1;11734:5;11704:39;:::i;:::-;11677:1;11670:5;11666:13;11657:22;;11633:120;;;11573:186;;:::o;11765:543::-;11866:2;11861:3;11858:11;11855:446;;;11900:38;11932:5;11900:38;:::i;:::-;11984:29;12002:10;11984:29;:::i;:::-;11974:8;11970:44;12167:2;12155:10;12152:18;12149:49;;;12188:8;12173:23;;12149:49;12211:80;12267:22;12285:3;12267:22;:::i;:::-;12257:8;12253:37;12240:11;12211:80;:::i;:::-;11870:431;;11855:446;11765:543;;;:::o;12314:117::-;12368:8;12418:5;12412:4;12408:16;12387:37;;12314:117;;;;:::o;12437:169::-;12481:6;12514:51;12562:1;12558:6;12550:5;12547:1;12543:13;12514:51;:::i;:::-;12510:56;12595:4;12589;12585:15;12575:25;;12488:118;12437:169;;;;:::o;12611:295::-;12687:4;12833:29;12858:3;12852:4;12833:29;:::i;:::-;12825:37;;12895:3;12892:1;12888:11;12882:4;12879:21;12871:29;;12611:295;;;;:::o;12911:1395::-;13028:37;13061:3;13028:37;:::i;:::-;13130:18;13122:6;13119:30;13116:56;;;13152:18;;:::i;:::-;13116:56;13196:38;13228:4;13222:11;13196:38;:::i;:::-;13281:67;13341:6;13333;13327:4;13281:67;:::i;:::-;13375:1;13399:4;13386:17;;13431:2;13423:6;13420:14;13448:1;13443:618;;;;14105:1;14122:6;14119:77;;;14171:9;14166:3;14162:19;14156:26;14147:35;;14119:77;14222:67;14282:6;14275:5;14222:67;:::i;:::-;14216:4;14209:81;14078:222;13413:887;;13443:618;13495:4;13491:9;13483:6;13479:22;13529:37;13561:4;13529:37;:::i;:::-;13588:1;13602:208;13616:7;13613:1;13610:14;13602:208;;;13695:9;13690:3;13686:19;13680:26;13672:6;13665:42;13746:1;13738:6;13734:14;13724:24;;13793:2;13782:9;13778:18;13765:31;;13639:4;13636:1;13632:12;13627:17;;13602:208;;;13838:6;13829:7;13826:19;13823:179;;;13896:9;13891:3;13887:19;13881:26;13939:48;13981:4;13973:6;13969:17;13958:9;13939:48;:::i;:::-;13931:6;13924:64;13846:156;13823:179;14048:1;14044;14036:6;14032:14;14028:22;14022:4;14015:36;13450:611;;;13413:887;;13003:1303;;;12911:1395;;:::o","linkReferences":{}},"methodIdentifiers":{"addDrug(string,string,uint256,uint256)":"b79befff","drugs(string)":"b009493d","invalidateDrug(string)":"fc0e4e2f","name()":"06fdde03","owner()":"8da5cb5b","verifyDrug(string)":"3b7b0a74"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.29+commit.ab55807c\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_batchId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"_manufactureDate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_expiryDate\",\"type\":\"uint256\"}],\"name\":\"addDrug\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"name\":\"drugs\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"batchId\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"manufactureDate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiryDate\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"isAuthentic\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_batchId\",\"type\":\"string\"}],\"name\":\"invalidateDrug\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_batchId\",\"type\":\"string\"}],\"name\":\"verifyDrug\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/DrugAuth.sol\":\"DrugAuth\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[\":forge-std/=lib/forge-std/src/\"]},\"sources\":{\"src/DrugAuth.sol\":{\"keccak256\":\"0x9da740a7103523b57c3f87b8048e23e357e81e01bbc135e26fabba8e48ae7302\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://d0d2c03bee2d6e71fc25931a88aeb7c7caa3acdeeafcd04bc6bc3a4e62a0afd3\",\"dweb:/ipfs/QmPTgsNMu5AsVcfD1FFSU9wJeVqwDJndnDhjogYeyzW9vE\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.29+commit.ab55807c"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_batchId","type":"string"},{"internalType":"uint256","name":"_manufactureDate","type":"uint256"},{"internalType":"uint256","name":"_expiryDate","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"addDrug"},{"inputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","name":"drugs","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"batchId","type":"string"},{"internalType":"uint256","name":"manufactureDate","type":"uint256"},{"internalType":"uint256","name":"expiryDate","type":"uint256"},{"internalType":"bool","name":"isAuthentic","type":"bool"}]},{"inputs":[{"internalType":"string","name":"_batchId","type":"string"}],"stateMutability":"nonpayable","type":"function","name":"invalidateDrug"},{"inputs":[],"stateMutability":"pure","type":"function","name":"name","outputs":[{"internalType":"string","name":"","type":"string"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[{"internalType":"string","name":"_batchId","type":"string"}],"stateMutability":"view","type":"function","name":"verifyDrug","outputs":[{"internalType":"bool","name":"","type":"bool"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["forge-std/=lib/forge-std/src/"],"optimizer":{"enabled":false,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/DrugAuth.sol":"DrugAuth"},"evmVersion":"cancun","libraries":{}},"sources":{"src/DrugAuth.sol":{"keccak256":"0x9da740a7103523b57c3f87b8048e23e357e81e01bbc135e26fabba8e48ae7302","urls":["bzz-raw://d0d2c03bee2d6e71fc25931a88aeb7c7caa3acdeeafcd04bc6bc3a4e62a0afd3","dweb:/ipfs/QmPTgsNMu5AsVcfD1FFSU9wJeVqwDJndnDhjogYeyzW9vE"],"license":"MIT"}},"version":1},"id":16}
];

export async function getPublicDrugData(batchId) {
  if (window.ethereum) {
    const provider = new ethers.BrowserProvider(window.ethereum);
    const contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, await provider.getSigner());
    
    // Example function call
    try {
      const drugDetails = await contract.getDrugDetails(batchId);
      return drugDetails; // Customize based on your contract method
    } catch (err) {
      console.error("Error fetching data from Polygon:", err);
      throw new Error("Failed to fetch data from Polygon.");
    }
  } else {
    throw new Error("Ethereum provider not found. Please install MetaMask.");
  }
}